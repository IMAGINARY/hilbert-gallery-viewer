{"mappings":"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","sources":["src/library/ts/index.ts","src/library/ts/hilbert-gallery-viewer.ts","node_modules/@parcel/runtime-js/lib/bundles/runtime-cdb574d348c0ff4f.js","src/library/ts/action/preload.ts","src/library/ts/action/base.ts","src/library/ts/util/preloader.ts","src/library/ts/util/log.ts","src/library/ts/action/reload.ts","src/library/ts/action/show.ts","src/library/ts/util/content-creator.ts","src/library/ts/transition/factory.ts","src/library/ts/transition/none.ts","src/library/ts/transition/base.ts","src/library/ts/util/promise.ts","src/library/ts/transition/fade.ts","node_modules/@parcel/runtime-js/lib/bundles/runtime-a3fcd039c6e80c18.js","src/library/ts/transition/cross-fade.ts","node_modules/@parcel/runtime-js/lib/bundles/runtime-42e7b9edf4dfcfba.js","src/library/ts/util/style.ts","src/library/ts/animation/factory.ts","src/library/ts/animation/none.ts","src/library/ts/animation/base.ts","src/library/ts/animation/pan-zoom.ts","node_modules/@parcel/runtime-js/lib/bundles/runtime-cae2c7bf535eb031.js"],"sourcesContent":["export * from './hilbert-gallery-viewer';\nexport * from './util/preloader';\n","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nimport cssText from 'bundle-text:../scss/viewer.scss';\n\nimport 'core-js/actual/promise';\n\nimport { Action } from './action/action';\nimport { PreloadAction } from './action/preload';\nimport { Log, LogLevel } from './util/log';\nimport { State } from './util/types';\nimport { ReloadAction } from './action/reload';\nimport { ShowAction } from './action/show';\nimport assert from 'assert';\nimport { appendStyle } from './util/style';\n\ntype ActionRegistry = Map<string, Action<unknown, unknown>>;\n\nexport default class HilbertGalleryViewer extends HTMLElement {\n  protected actionRegistry: ActionRegistry;\n\n  protected state: State;\n\n  constructor() {\n    super();\n\n    const shadowRoot = this.attachShadow({ mode: 'open' });\n\n    appendStyle(shadowRoot, cssText as string);\n\n    const container = document.createElement('div');\n    container.classList.add('container');\n    shadowRoot.appendChild(container);\n\n    this.state = {\n      log: new Log(LogLevel.WARN),\n      shadowRoot,\n      container,\n    };\n\n    this.actionRegistry = this.createActionRegistry();\n  }\n\n  protected createActionRegistry(): ActionRegistry {\n    const registry = new Map<string, Action<unknown, unknown>>();\n    registry.set('reload', new ReloadAction(this.state));\n    registry.set('preload', new PreloadAction(this.state));\n    registry.set('show', new ShowAction(this.state));\n    return registry;\n  }\n\n  async execute(action: string, arg: unknown): Promise<void> {\n    // executeImpl only exists for the purpose of renaming the parameters\n    await this.executeImpl(action, arg);\n  }\n\n  private async executeImpl(actionName: string, arg: unknown): Promise<void> {\n    const action = this.actionRegistry.get(actionName);\n    if (action) {\n      // this may throw an exception if arg has invalid type\n      const executor = action.buildExecutor(arg);\n      // the executor encapsulates the preprocessed arg\n      // and allows type-safe execution\n      await executor();\n    } else {\n      throw new TypeError('HilbertGalleryViewer.execute(): unknown action');\n    }\n  }\n}\n\ncustomElements.define('hilbert-gallery-viewer', HilbertGalleryViewer);\n\nexport { HilbertGalleryViewer };\n","module.exports = \"151b09ce7de6e751\";","import { Base } from './base';\nimport { Preloader } from '../util/preloader';\nimport { State } from '../util/types';\n\ntype PreloadItem = {\n  mimetype: string;\n  url: string;\n};\n\nexport default class PreloadAction extends Base<PreloadItem[], void> {\n  protected preloader: Preloader;\n\n  constructor(state: State) {\n    super(state);\n    this.preloader = new Preloader();\n  }\n\n  async execute(items: PreloadItem[]): Promise<void> {\n    this.preloader.unref();\n    items.forEach(({ mimetype, url }) => this.preloader.preload(mimetype, url));\n    return Promise.resolve();\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  unpack(arg: unknown): PreloadItem[] {\n    if (!Array.isArray(arg)) {\n      throw new TypeError('PreloadAction.unpack(arg): arg must be an array');\n    }\n    const items = arg as unknown[];\n    items.forEach((item, index) => {\n      const { mimetype, url } = item as { mimetype: unknown; url: unknown };\n      if (typeof mimetype !== 'string') {\n        throw new TypeError(\n          `PreloadAction.unpack(arg): item ${index} of args must have a mimetype`,\n        );\n      }\n      if (typeof url !== 'string') {\n        throw new TypeError(\n          `PreloadAction.unpack(arg): item ${index} of arg must have an url`,\n        );\n      }\n    });\n    return arg as PreloadItem[];\n  }\n}\n\nexport { PreloadAction, PreloadItem };\n","import { Action } from './action';\nimport { State } from '../util/types';\n\nexport default abstract class Base<A, R> implements Action<A, R> {\n  protected readonly state: State;\n\n  protected constructor(state: State) {\n    this.state = state;\n  }\n\n  abstract execute(arg: A): Promise<R>;\n\n  abstract unpack(arg: unknown): A;\n\n  buildExecutor(arg: unknown): () => Promise<R> {\n    const unpackedArg: A = this.unpack(arg);\n    return () => this.execute(unpackedArg);\n  }\n}\n\nexport { Base };\n","export default class Preloader {\n  protected refs = new Map<string, unknown>();\n\n  protected typeRegistry = new Map<string, (url: URL | string) => void>();\n\n  constructor() {\n    this.typeRegistry.set('image', this.preloadImage.bind(this));\n    this.typeRegistry.set('video', this.preloadVideo.bind(this));\n  }\n\n  preload(mimetype: string, url: URL | string): boolean {\n    const type = mimetype.split('/', 1)[0];\n    const preloadFunc = this.typeRegistry.get(type);\n    if (preloadFunc) {\n      preloadFunc(url);\n      return true;\n    }\n    return false;\n  }\n\n  preloadImage(url: URL | string): void {\n    const { href } = new URL(url);\n    const image = new Image();\n    image.src = href;\n    this.refs.set(href, image);\n  }\n\n  preloadVideo(url: URL | string) {\n    const { href } = new URL(url);\n    const video = document.createElement('video');\n    video.preload = 'auto';\n    video.src = href;\n    this.refs.set(href, video);\n  }\n\n  unref(...refs: string[]) {\n    if (refs.length === 0) {\n      this.refs.clear();\n    } else {\n      refs.forEach((ref) => this.refs.delete(ref));\n    }\n  }\n}\n\nexport { Preloader };\n","/* eslint-disable no-console */\n\nenum LogLevel {\n  OFF = 0,\n  ERROR = 200,\n  WARN = 300,\n  INFO = 400,\n  DEBUG = 500,\n  TRACE = 600,\n}\n\nexport default class Log {\n  level: LogLevel;\n\n  constructor(level: LogLevel = LogLevel.INFO) {\n    this.level = level;\n  }\n\n  error(...args: unknown[]) {\n    if (this.level >= LogLevel.ERROR) {\n      console.error(...args);\n    }\n  }\n\n  assert(assertion: boolean, ...args: unknown[]) {\n    if (this.level >= LogLevel.ERROR) {\n      console.assert(assertion, ...args);\n    }\n  }\n\n  warn(...args: unknown[]) {\n    if (this.level >= LogLevel.WARN) {\n      console.warn(...args);\n    }\n  }\n\n  info(...args: unknown[]) {\n    if (this.level >= LogLevel.INFO) {\n      console.info(...args);\n    }\n  }\n\n  debug(...args: unknown[]) {\n    if (this.level >= LogLevel.DEBUG) {\n      console.debug(...args);\n    }\n  }\n\n  trace(...args: unknown[]) {\n    if (this.level >= LogLevel.TRACE) {\n      console.trace(...args);\n    }\n  }\n}\n\nexport { Log, LogLevel };\n","import { Base } from './base';\nimport { State } from '../util/types';\n\nexport default class ReloadAction extends Base<void, void> {\n  // eslint-disable-next-line @typescript-eslint/no-useless-constructor\n  constructor(state: State) {\n    super(state);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  async execute(): Promise<void> {\n    window.location.reload();\n    return Promise.resolve();\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  unpack(): void {}\n}\n\nexport { ReloadAction };\n","import { Base } from './base';\nimport { State } from '../util/types';\nimport { ContentCreator } from '../util/content-creator';\nimport { TransitionFactory } from '../transition/factory';\nimport { Transition } from '../transition/transition';\nimport { NoneTransition } from '../transition/none';\nimport { AnimationFactory } from '../animation/factory';\nimport { Animation } from '../animation/animation';\nimport { NoneAnimation } from '../animation/none';\n\ntype ShowArg = {\n  mimetype: string;\n  url: string;\n  fit: 'cover' | 'contain';\n  color: string;\n  transition: { type: string; options: unknown };\n  animation: { type: string; options: unknown };\n};\n\ntype DOMStructure = {\n  transition: HTMLDivElement;\n  animation: HTMLDivElement;\n  content: HTMLElement;\n};\n\nexport default class ShowAction extends Base<ShowArg, void> {\n  protected transition: Transition;\n\n  protected animation: Animation;\n\n  protected transitionFactory: TransitionFactory;\n\n  protected animationFactory: AnimationFactory;\n\n  protected current: DOMStructure;\n\n  // eslint-disable-next-line @typescript-eslint/no-useless-constructor\n  constructor(state: State) {\n    super(state);\n    this.transitionFactory = new TransitionFactory(state.shadowRoot);\n    this.animationFactory = new AnimationFactory(state.shadowRoot);\n    this.transition = new NoneTransition();\n    this.animation = new NoneAnimation();\n    const dummy = document.createElement('div');\n    this.current = this.appendCurrentContent(dummy, 'black');\n  }\n\n  removePrevious(): void {\n    // keep only current content\n    const { container } = this.state;\n    while (container.children.length > 1) {\n      container.children[0].remove();\n    }\n  }\n\n  cleanup(): void {\n    this.transition.cancel();\n    this.animation.cancel();\n    this.removePrevious();\n  }\n\n  appendCurrentContent(content: HTMLElement, color: string): DOMStructure {\n    const animation = document.createElement('div');\n    animation.classList.add('animation');\n    animation.appendChild(content);\n\n    const transition = document.createElement('div');\n    transition.classList.add('transition');\n    transition.style.setProperty('--transition-background-color', color);\n    transition.appendChild(animation);\n\n    const { container } = this.state;\n    container.appendChild(transition);\n\n    return {\n      transition,\n      animation,\n      content,\n    };\n  }\n\n  async execute(arg: ShowArg): Promise<void> {\n    const { mimetype, url, fit, color } = arg;\n\n    // first parse args and prepare transition and animation\n    const transitionCreator = this.prepareTransition(arg);\n    const animationCreator = this.prepareAnimation(arg);\n\n    // now that arguments are parsed: instantiate everything\n    const content = ContentCreator.create(mimetype, url, fit);\n    try {\n      await ContentCreator.awaitLoad(content);\n    } catch (e) {\n      this.state.log.warn(\n        'Waiting for content to load failed. Proceeding anyway.',\n      );\n    }\n\n    this.cleanup();\n    const previous = this.current;\n    this.current = this.appendCurrentContent(content, color ?? 'black');\n    this.transition = this.createTransition(transitionCreator, previous);\n    try {\n      await this.transition.targetVisible();\n    } catch (e) {\n      this.state.log.warn(\n        'Waiting for target to become visible failed. Proceeding anyway.',\n      );\n    }\n    ContentCreator.play(content);\n    this.animation = this.createAnimation(animationCreator);\n\n    try {\n      await this.transition.done();\n    } catch (e) {\n      const msg = 'Waiting for transition to end failed. Proceeding anyway';\n      if (e) {\n        this.state.log.warn(msg, e);\n      } else {\n        this.state.log.warn(msg);\n      }\n    }\n\n    this.removePrevious();\n  }\n\n  protected prepareTransition(\n    arg: ShowArg,\n  ): ReturnType<TransitionFactory['prepare']> {\n    const { transition } = arg;\n    const { type, options } = transition ?? { type: 'none', options: {} };\n\n    return this.transitionFactory.prepare(type, options);\n  }\n\n  protected prepareAnimation(\n    arg: ShowArg,\n  ): ReturnType<AnimationFactory['prepare']> {\n    const { animation } = arg;\n    const { type, options } = animation ?? { type: 'none', options: {} };\n\n    return this.animationFactory.prepare(type, options);\n  }\n\n  protected createTransition(\n    creator: ReturnType<TransitionFactory['prepare']>,\n    previous: DOMStructure,\n  ): Transition {\n    const { container } = this.state;\n    const from = previous.transition;\n    const to = this.current.transition;\n\n    return creator(container, from, to);\n  }\n\n  protected createAnimation(\n    creator: ReturnType<AnimationFactory['prepare']>,\n  ): Animation {\n    const { animation: wrapper, content } = this.current;\n    return creator(wrapper, content);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  unpack(arg: unknown): ShowArg {\n    if (typeof arg !== 'object') {\n      throw new TypeError('ShowAction.unpack(arg): arg must be an object');\n    }\n    // TODO: further type checking\n    return arg as ShowArg;\n  }\n}\n\nexport { ShowAction };\n","class ContentCreator {\n  static create(\n    mimetype: string,\n    url: string,\n    objectFit: 'contain' | 'cover' = 'cover',\n  ): HTMLElement {\n    const type = mimetype.split('/', 1)[0];\n    let content: HTMLElement;\n    switch (type) {\n      case 'image':\n        content = ContentCreator.createImage(url);\n        break;\n      case 'video':\n        content = ContentCreator.createVideo(url);\n        break;\n      default:\n        content = ContentCreator.createObject(mimetype, url);\n        break;\n    }\n    content.classList.add('content');\n    content.classList.add(`fit-${objectFit}`);\n    return content;\n  }\n\n  protected static createObject(\n    mimetype: string,\n    url: string,\n  ): HTMLObjectElement {\n    const object = document.createElement('object');\n    object.type = mimetype;\n    object.data = url;\n    return object;\n  }\n\n  protected static createImage(url: string): HTMLImageElement {\n    const image = document.createElement('img');\n    image.src = url;\n    return image;\n  }\n\n  protected static createVideo(url: string): HTMLVideoElement {\n    const video = document.createElement('video');\n    video.preload = 'auto';\n    video.src = url;\n    video.autoplay = false;\n    return video;\n  }\n\n  public static async awaitLoad<T extends HTMLElement>(content: T): Promise<T> {\n    return new Promise((resolve) => {\n      if (content.tagName === 'IMG') {\n        const image = content as unknown as HTMLImageElement;\n        if (image.complete) {\n          resolve(content);\n        } else {\n          const handler = () => {\n            image.removeEventListener('load', handler);\n            image.removeEventListener('error', handler);\n            requestAnimationFrame(() => resolve(content));\n          };\n          image.addEventListener('load', handler);\n          image.addEventListener('error', handler);\n        }\n      } else {\n        // consider the transition-ol done after a grace period of 1s\n        setTimeout(() => resolve(content), 1000);\n      }\n    });\n  }\n\n  public static play<T extends HTMLElement>(content: T) {\n    if (content.tagName === 'VIDEO') {\n      const video = content as unknown as HTMLVideoElement;\n      video.play().finally(() => {});\n    }\n  }\n}\n\nexport { ContentCreator };\n","import { Transition, TransitionStatic } from './transition';\nimport { NoneTransition } from './none';\nimport { FadeTransition } from './fade';\nimport { CrossFadeTransition } from './cross-fade';\nimport { appendStyle } from '../util/style';\n\nexport default class TransitionFactory {\n  protected root: DocumentFragment;\n\n  protected transitionRegistry: Map<string, TransitionStatic<Transition, any>> =\n    new Map();\n\n  constructor(root: DocumentFragment) {\n    this.root = root;\n    this.registerKnownTransitions();\n  }\n\n  protected registerKnownTransitions() {\n    this.register('none', NoneTransition);\n    this.register('fade', FadeTransition);\n    this.register('cross-fade', CrossFadeTransition);\n  }\n\n  public register(\n    id: string,\n    transitionClass: TransitionStatic<Transition, any>,\n  ) {\n    if (this.transitionRegistry.has(id)) {\n      throw new Error('Transition type already registered');\n    }\n    appendStyle(\n      this.root,\n      transitionClass.getStyleSheetAsString(),\n      `transition-${id}`,\n    );\n    this.transitionRegistry.set(id, transitionClass);\n  }\n\n  public prepare(\n    type = 'none',\n    options: unknown = {},\n  ): (\n    container: HTMLDivElement,\n    from: HTMLElement,\n    to: HTMLElement,\n  ) => Transition {\n    const TransitionClass = this.transitionRegistry.get(type);\n    if (!TransitionClass) {\n      throw new Error(`Unknown transition type: ${type}`);\n    }\n\n    // unpacks the options and throws an exception if they are invalid,\n    // but does create the actual transition yet\n    return TransitionClass.prepare(options);\n  }\n}\n\nexport { TransitionFactory };\n","import { BaseTransition } from './base';\nimport { TransitionStatic } from './transition';\nimport { staticImplements } from '../util/types';\n\n// @staticImplements<TransitionStatic<NoneTransition, void>>()\nexport default class NoneTransition extends BaseTransition {\n  constructor(\n    container: HTMLDivElement = document.createElement('div'),\n    from: HTMLElement = document.createElement('div'),\n    to: HTMLElement = document.createElement('div'),\n  ) {\n    super(container, from, to);\n    this._isCancelled = false;\n    this._isDone = true;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  cancel(): void {}\n\n  // eslint-disable-next-line class-methods-use-this\n  targetVisible(): Promise<void> {\n    return Promise.resolve();\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  done(): Promise<void> {\n    return Promise.resolve();\n  }\n\n  static unpack(): void {}\n\n  static prepare(): (\n    container: HTMLDivElement,\n    from: HTMLElement,\n    to: HTMLElement,\n  ) => NoneTransition {\n    return (container: HTMLDivElement, from: HTMLElement, to: HTMLElement) =>\n      new NoneTransition(container, from, to);\n  }\n\n  static getStyleSheetAsString(): string {\n    return '';\n  }\n}\n\nexport { NoneTransition };\n","import { Transition } from './transition';\nimport { PromiseExecutorCallbacks } from '../util/promise';\n\nexport default abstract class BaseTransition implements Transition {\n  protected container: HTMLDivElement;\n\n  protected from: HTMLElement;\n\n  protected to: HTMLElement;\n\n  protected _isCancelled = false;\n\n  protected _isDone = false;\n\n  protected targetVisiblePEC: PromiseExecutorCallbacks<void>;\n\n  protected donePEC: PromiseExecutorCallbacks<void>;\n\n  protected constructor(\n    container: HTMLDivElement,\n    from: HTMLElement,\n    to: HTMLElement,\n  ) {\n    this.container = container;\n    this.from = from;\n    this.to = to;\n\n    this.targetVisiblePEC = new PromiseExecutorCallbacks<void>();\n    this.donePEC = new PromiseExecutorCallbacks<void>();\n\n    // prevent uncaught exceptions in promise\n    this.targetVisiblePEC.promise().catch(() => {});\n    this.donePEC.promise().catch(() => {});\n  }\n\n  abstract cancel(): void;\n\n  isCancelled(): boolean {\n    return this._isCancelled;\n  }\n\n  targetVisible(): Promise<void> {\n    return this.targetVisiblePEC.promise();\n  }\n\n  done(): Promise<void> {\n    return this.donePEC.promise();\n  }\n\n  isDone(): boolean {\n    return this._isDone;\n  }\n}\n\nexport { BaseTransition };\n","class PromiseExecutorCallbacks<T> {\n  private readonly _promise: Promise<T>;\n\n  private readonly _resolve: (result: T) => void;\n\n  private readonly _reject: () => void;\n\n  constructor() {\n    // dummy initialization required to satisfy TS2564 (definite assignment)\n    let tmpResolve = (result: T) => {};\n    let tmpReject = () => {};\n    this._promise = new Promise((resolve, reject) => {\n      tmpResolve = resolve;\n      tmpReject = reject;\n    });\n    this._resolve = tmpResolve;\n    this._reject = tmpReject;\n  }\n\n  promise(): Promise<T> {\n    return this._promise;\n  }\n\n  resolve(result: T) {\n    return this._resolve(result);\n  }\n\n  reject() {\n    return this._reject();\n  }\n}\n\nexport { PromiseExecutorCallbacks };\n","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nimport cssText from 'bundle-text:../../scss/transition/fade.scss';\n\nimport { BaseTransition } from './base';\nimport { TransitionStatic } from './transition';\nimport { staticImplements } from '../util/types';\n\ntype FadeTransitionOptions = {\n  duration: number;\n  color: string;\n};\n\nconst defaultOptions: FadeTransitionOptions = {\n  duration: 500,\n  color: '#000',\n};\n\n// @staticImplements<TransitionStatic<FadeTransition, FadeTransitionOptions>>()\nexport default class FadeTransition extends BaseTransition {\n  protected fromEndCancelHandler: (event: AnimationEvent) => void;\n\n  protected toEndHandler: (event: AnimationEvent) => void;\n\n  protected toCancelHandler: (event: AnimationEvent) => void;\n\n  constructor(\n    container: HTMLDivElement,\n    from: HTMLElement,\n    to: HTMLElement,\n    options: FadeTransitionOptions,\n  ) {\n    super(container, from, to);\n\n    const { duration, color } = { ...defaultOptions, ...(options ?? {}) };\n\n    const { style } = container;\n    style.setProperty('--transition-fade-duration', `${duration}s`);\n    style.setProperty('--transition-fade-color', `${color}`);\n\n    from.classList.add('fade');\n    from.classList.add('fade-out');\n\n    this.fromEndCancelHandler = ({ animationName }: AnimationEvent) => {\n      if (animationName === 'transition-fade-out') {\n        this.targetVisiblePEC.resolve();\n      }\n    };\n    from.addEventListener('animationend', this.fromEndCancelHandler);\n    from.addEventListener('animationcancel', this.fromEndCancelHandler);\n\n    to.classList.add('fade');\n    to.classList.add('fade-in');\n\n    this.toEndHandler = ({ animationName }: AnimationEvent) => {\n      if (animationName === 'transition-fade-in') {\n        this.end();\n      }\n    };\n    this.toCancelHandler = ({ animationName }: AnimationEvent) => {\n      if (animationName === 'transition-fade-in') {\n        this.cancel();\n      }\n    };\n    to.addEventListener('animationend', this.toEndHandler);\n    to.addEventListener('animationcancel', this.toCancelHandler);\n  }\n\n  protected end(): void {\n    if (!this.isCancelled() && !this.isDone()) {\n      this.cleanup();\n      this._isDone = true;\n      this.targetVisiblePEC.resolve();\n      this.donePEC.resolve();\n    }\n  }\n\n  cancel(): void {\n    if (!this.isCancelled() && !this.isDone()) {\n      this.cleanup();\n      this._isCancelled = true;\n      this.targetVisiblePEC.resolve();\n      this.donePEC.reject();\n    }\n  }\n\n  protected cleanup() {\n    this.from.removeEventListener('animationend', this.fromEndCancelHandler);\n    this.from.removeEventListener('animationcancel', this.fromEndCancelHandler);\n\n    this.to.removeEventListener('animationend', this.toEndHandler);\n    this.to.removeEventListener('animationcancel', this.toCancelHandler);\n\n    const { style } = this.container;\n    style.removeProperty('--transition-fade-duration');\n    style.removeProperty('--transition-fade-color');\n\n    this.from.classList.remove('fade');\n    this.from.classList.remove('fade-out');\n\n    this.to.classList.remove('fade');\n    this.to.classList.remove('fade-in');\n  }\n\n  static unpack(options: unknown): FadeTransitionOptions {\n    return options as FadeTransitionOptions;\n  }\n\n  static prepare(\n    options: unknown,\n  ): (\n    container: HTMLDivElement,\n    from: HTMLElement,\n    to: HTMLElement,\n  ) => FadeTransition {\n    const unpackedOptions = FadeTransition.unpack(options);\n    return (container: HTMLDivElement, from: HTMLElement, to: HTMLElement) =>\n      new FadeTransition(container, from, to, unpackedOptions);\n  }\n\n  static getStyleSheetAsString(): string {\n    return cssText as string;\n  }\n}\n\nexport { FadeTransition, FadeTransitionOptions };\n","module.exports = \"f4d2b10783902acd\";","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nimport cssText from 'bundle-text:../../scss/transition/cross-fade.scss';\n\nimport { BaseTransition } from './base';\nimport { TransitionStatic } from './transition';\nimport { staticImplements } from '../util/types';\n\ntype CrossFadeTransitionOptions = {\n  duration: number;\n};\n\nconst defaultOptions: CrossFadeTransitionOptions = {\n  duration: 500,\n};\n\n// @staticImplements<TransitionStatic<CrossFadeTransition, CrossFadeTransitionOptions>>()\nexport default class CrossFadeTransition extends BaseTransition {\n  protected toEndHandler: (event: AnimationEvent) => void;\n\n  protected toCancelHandler: (event: AnimationEvent) => void;\n\n  constructor(\n    container: HTMLDivElement,\n    from: HTMLElement,\n    to: HTMLElement,\n    options: CrossFadeTransitionOptions,\n  ) {\n    super(container, from, to);\n\n    const { duration } = { ...defaultOptions, ...(options ?? {}) };\n\n    const { style } = container;\n    style.setProperty('--transition-cross-fade-duration', `${duration}s`);\n\n    from.classList.add('cross-fade');\n    from.classList.add('cross-fade-out');\n\n    to.classList.add('cross-fade');\n    to.classList.add('cross-fade-in');\n\n    this.toEndHandler = ({ animationName }: AnimationEvent) => {\n      if (animationName === 'transition-cross-fade-in') {\n        this.end();\n      }\n    };\n    this.toCancelHandler = ({ animationName }: AnimationEvent) => {\n      if (animationName === 'transition-cross-fade-in') {\n        this.cancel();\n      }\n    };\n    to.addEventListener('animationend', this.toEndHandler);\n    to.addEventListener('animationcancel', this.toCancelHandler);\n\n    this.targetVisiblePEC.resolve();\n  }\n\n  protected end(): void {\n    if (!this.isCancelled() && !this.isDone()) {\n      this.cleanup();\n      this._isDone = true;\n      this.donePEC.resolve();\n    }\n  }\n\n  cancel(): void {\n    if (!this.isCancelled() && !this.isDone()) {\n      this.cleanup();\n      this._isCancelled = true;\n      this.donePEC.reject();\n    }\n  }\n\n  protected cleanup() {\n    this.to.removeEventListener('animationend', this.toEndHandler);\n    this.to.removeEventListener('animationcancel', this.toCancelHandler);\n\n    const { style } = this.container;\n    style.removeProperty('--transition-cross-fade-duration');\n\n    this.from.classList.remove('cross-fade');\n    this.from.classList.remove('cross-fade-out');\n\n    this.to.classList.remove('cross-fade');\n    this.to.classList.remove('cross-fade-in');\n  }\n\n  static unpack(options: unknown): CrossFadeTransitionOptions {\n    return options as CrossFadeTransitionOptions;\n  }\n\n  static prepare(\n    options: unknown,\n  ): (\n    container: HTMLDivElement,\n    from: HTMLElement,\n    to: HTMLElement,\n  ) => CrossFadeTransition {\n    const unpackedOptions = CrossFadeTransition.unpack(options);\n    return (container: HTMLDivElement, from: HTMLElement, to: HTMLElement) =>\n      new CrossFadeTransition(container, from, to, unpackedOptions);\n  }\n\n  static getStyleSheetAsString(): string {\n    return cssText as string;\n  }\n}\n\nexport { CrossFadeTransition, CrossFadeTransitionOptions };\n","module.exports = \"02850558027d8d37\";","/* eslint-disable import/prefer-default-export */\n\nfunction appendStyle(\n  root: DocumentFragment,\n  stylesheetText: string,\n  id?: string,\n) {\n  const style: HTMLStyleElement = document.createElement('style');\n  if (typeof id !== 'undefined') {\n    style.id = id;\n  }\n  style.textContent = stylesheetText;\n  const selector =\n    \"style[type='text/css']:last-of-type, style:not([type]):last-of-type\";\n  const lastStyleElem = root.querySelector(selector);\n  if (lastStyleElem === null) {\n    root.prepend(style);\n  } else {\n    lastStyleElem.after(style);\n  }\n}\n\nexport { appendStyle };\n","import { Animation, AnimationStatic } from './animation';\nimport { appendStyle } from '../util/style';\nimport { NoneAnimation } from './none';\nimport { PanZoomAnimation } from './pan-zoom';\n\nclass AnimationFactory {\n  protected root: DocumentFragment;\n\n  protected animationRegistry: Map<string, AnimationStatic<Animation, any>> =\n    new Map();\n\n  constructor(root: DocumentFragment) {\n    this.root = root;\n    this.registerKnownTransitions();\n  }\n\n  protected registerKnownTransitions() {\n    this.register('none', NoneAnimation);\n    this.register('pan-zoom', PanZoomAnimation);\n  }\n\n  public register(id: string, AnimationClass: AnimationStatic<Animation, any>) {\n    if (this.animationRegistry.has(id)) {\n      throw new Error('Animation type already registered');\n    }\n    appendStyle(\n      this.root,\n      AnimationClass.getStyleSheetAsString(),\n      `animation-${id}`,\n    );\n    this.animationRegistry.set(id, AnimationClass);\n  }\n\n  public prepare(\n    type = 'none',\n    options: unknown = {},\n  ): (wrapper: HTMLDivElement, content: HTMLElement) => Animation {\n    const AnimationClass = this.animationRegistry.get(type);\n    if (!AnimationClass) {\n      throw new Error(`Unknown animation type: ${type}`);\n    }\n\n    // unpacks the options and throws an exception if they are invalid,\n    // but does create the actual transition yet\n    return AnimationClass.prepare(options);\n  }\n}\n\nexport { AnimationFactory };\n","import { BaseAnimation } from './base';\nimport { AnimationStatic } from './animation';\nimport { staticImplements } from '../util/types';\n\n// @staticImplements<AnimationStatic<NoneAnimation, void>>()\nclass NoneAnimation extends BaseAnimation {\n  constructor(\n    wrapper: HTMLDivElement = document.createElement('div'),\n    content: HTMLElement = document.createElement('div'),\n  ) {\n    super(wrapper, content);\n    this._isCancelled = false;\n    this._isDone = true;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  cancel(): void {}\n\n  // eslint-disable-next-line class-methods-use-this\n  targetVisible(): Promise<void> {\n    return Promise.resolve();\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  done(): Promise<void> {\n    return Promise.resolve();\n  }\n\n  static unpack(): void {}\n\n  static prepare(): (\n    wrapper: HTMLDivElement,\n    content: HTMLElement,\n  ) => NoneAnimation {\n    return (wrapper: HTMLDivElement, content: HTMLElement) =>\n      new NoneAnimation(wrapper, content);\n  }\n\n  static getStyleSheetAsString(): string {\n    return '';\n  }\n}\n\nexport { NoneAnimation };\n","import { Animation } from './animation';\nimport { PromiseExecutorCallbacks } from '../util/promise';\n\nexport default abstract class BaseAnimation implements Animation {\n  protected wrapper: HTMLDivElement;\n\n  protected content: HTMLElement;\n\n  protected _isCancelled = false;\n\n  protected _isDone = false;\n\n  protected donePEC: PromiseExecutorCallbacks<void>;\n\n  protected constructor(wrapper: HTMLDivElement, content: HTMLElement) {\n    this.wrapper = wrapper;\n    this.content = content;\n\n    this.donePEC = new PromiseExecutorCallbacks<void>();\n\n    // prevent uncaught exceptions in promise\n    this.donePEC.promise().catch(() => {});\n  }\n\n  abstract cancel(): void;\n\n  isCancelled(): boolean {\n    return this._isCancelled;\n  }\n\n  done(): Promise<void> {\n    return this.donePEC.promise();\n  }\n\n  isDone(): boolean {\n    return this._isDone;\n  }\n}\n\nexport { BaseAnimation };\n","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nimport cssText from 'bundle-text:../../scss/animation/pan-zoom.scss';\n\nimport { BaseAnimation } from './base';\nimport { AnimationStatic } from './animation';\nimport { RequireOnlyOne, staticImplements } from '../util/types';\n\ntype Target = {\n  x: number;\n  y: number;\n  scale: number;\n};\n\ntype PanZoomAnimationOptions = {\n  duration: number;\n  from?: RequireOnlyOne<Target>;\n  to: RequireOnlyOne<Target>;\n};\n\nfunction setCSSPropertyIfDefined<T>(\n  elem: HTMLElement,\n  property: string,\n  formatter: (v: Exclude<T, undefined>) => string,\n  value: T,\n) {\n  if (typeof value !== 'undefined')\n    elem.style.setProperty(property, formatter(value as Exclude<T, undefined>));\n}\n\n// @staticImplements<AnimationStatic<PanZoomAnimation, PanZoomAnimationOptions>>()\nexport default class PanZoomAnimation extends BaseAnimation {\n  protected endHandler: (event: AnimationEvent) => void;\n\n  protected cancelHandler: (event: AnimationEvent) => void;\n\n  constructor(\n    wrapper: HTMLDivElement,\n    content: HTMLElement,\n    options: PanZoomAnimationOptions,\n  ) {\n    super(wrapper, content);\n    this.endHandler = () => {};\n    this.cancelHandler = () => {};\n    this.asyncInit(options).finally(() => {});\n  }\n\n  async asyncInit(options: PanZoomAnimationOptions) {\n    this.wrapper.classList.add('animation-pan-zoom');\n\n    if (typeof options.from !== 'undefined') {\n      try {\n        const { from } = options;\n        this.setDefinedCssProperties(0, from);\n\n        // let the values settle on the next frame\n        await new Promise((resolve) => {\n          requestAnimationFrame(resolve);\n        });\n      } catch (e) {\n        // eslint-disable-next-line no-empty\n      }\n    }\n\n    if (!this.isCancelled()) {\n      const { duration, to } = options;\n      this.setDefinedCssProperties(duration, to);\n\n      this.endHandler = ({ animationName }) => {\n        if (animationName === 'animation-pan-zoom-animation') {\n          this.end();\n        }\n      };\n      this.cancelHandler = ({ animationName }) => {\n        if (animationName === 'animation-pan-zoom-animation') {\n          this.cancel();\n        }\n      };\n\n      this.wrapper.addEventListener('animationend', this.endHandler);\n      this.wrapper.addEventListener('animationcancel', this.cancelHandler);\n    }\n  }\n\n  protected setDefinedCssProperties(\n    duration: number,\n    { x, y, scale }: RequireOnlyOne<Target>,\n  ) {\n    const { wrapper: w } = this;\n    const s = setCSSPropertyIfDefined;\n    s(w, '--animation-pan-zoom-duration', (v) => `${v}s`, duration);\n    s(w, '--animation-pan-zoom-target-x', (v) => `${v}`, x);\n    s(w, '--animation-pan-zoom-target-y', (v) => `${v}`, y);\n    s(w, '--animation-pan-zoom-target-scale', (v) => `${v}`, scale);\n  }\n\n  protected end(): void {\n    if (!this.isCancelled() && !this.isDone()) {\n      this.cleanup();\n      this._isDone = true;\n      this.donePEC.resolve();\n    }\n  }\n\n  cancel(): void {\n    if (!this.isCancelled() && !this.isDone()) {\n      this.cleanup();\n      this._isCancelled = true;\n      this.donePEC.reject();\n    }\n  }\n\n  protected cleanup() {\n    const { wrapper } = this;\n\n    wrapper.addEventListener('animationend', this.endHandler);\n    wrapper.addEventListener('animationcancel', this.cancelHandler);\n\n    /**\n     * We do not remove the CSS classes and custom properties to keep the\n     * forwards fill-mode of the animation (target state).\n     */\n  }\n\n  static unpack(options: unknown): PanZoomAnimationOptions {\n    return options as PanZoomAnimationOptions;\n  }\n\n  static prepare(\n    options: unknown,\n  ): (wrapper: HTMLDivElement, content: HTMLElement) => PanZoomAnimation {\n    const unpackedOptions = PanZoomAnimation.unpack(options);\n    return (wrapper: HTMLDivElement, content: HTMLElement) =>\n      new PanZoomAnimation(wrapper, content, unpackedOptions);\n  }\n\n  static getStyleSheetAsString(): string {\n    return cssText as string;\n  }\n}\n\nexport { PanZoomAnimation, PanZoomAnimationOptions };\n","module.exports = \"b44d02cc0655e8d8\";"],"names":[],"version":3,"file":"index.cjs.map"}